(function(){"use strict";var e={105:function(e,t,a){var s=a(144),r=a(998),n=a(6232),o=a(3423),i=a(6190),l=a(4145),c=a(4886),u=a(2118),m=a(9930),d=a(4324),p=a(5808),h=a(7397),f=a(4525),_=a(9378),g=a(3059),v=a(4528),b=a(9258),k=a(3687),q=a(1783),y=a(7953),D=function(){var e=this,t=e._self._c;return t(r.Z,[t(n.Z,{attrs:{app:"",color:"primary",dark:""}},[t(y.qW,{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.toRoot()}}},[e.isRoot?e._e():t(d.Z,{attrs:{large:""}},[e._v("mdi-chevron-left")]),e._v(e._s(e.appName))],1),t(k.Z),e.isAuth?t(y.lj,[t(v.Z,{attrs:{"offset-y":"","open-on-hover":"","close-on-content-click":!0},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(i.Z,e._g({staticStyle:{cursor:"default"},attrs:{text:""}},a),[t(o.Z,{staticClass:"mr-3",attrs:{size:"40"}},[t("img",{attrs:{src:e.userIcon}})]),e._v(e._s(e.userName))],1)]}}],null,!1,4292802387)},[t(p.Z,[e.isAdmin?t(h.Z,{attrs:{"no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[t(_.km,[t(_.V9,[e._v("管理者向け設定")])],1)]},proxy:!0}],null,!1,3159950909),model:{value:e.isActiveAdminMenu,callback:function(t){e.isActiveAdminMenu=t},expression:"isActiveAdminMenu"}},e._l(e.adminMenuItems,(function(a){return t(f.Z,{key:a.title,attrs:{link:"",to:a.link}},[t(_.km,[t(_.V9,[e._v(e._s(a.title))])],1)],1)})),1):e._e(),t(f.Z,{attrs:{link:"",to:"/settings"}},[t(_.km,[t(_.V9,[e._v("アプリ設定")])],1)],1),t(f.Z,{attrs:{link:""}},[t(_.km,[t(_.V9,{on:{click:e.logout}},[e._v("ログアウト")])],1)],1)],1)],1)],1):e._e()],1),t(g.Z,[t(u.Z,{attrs:{fluid:""}},[t("router-view")],1)],1),t(b.Z,{attrs:{color:"info"},scopedSlots:e._u([{key:"action",fn:function({attrs:a}){return[t(i.Z,e._b({attrs:{text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",a,!1),[e._v("Close")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.message)+" ")]),t(m.Z,{attrs:{transition:"scale-transition","max-width":"500px",persistent:""},model:{value:e.showSettingsAlert,callback:function(t){e.showSettingsAlert=t},expression:"showSettingsAlert"}},[t(l.Z,[t(q.Z,{attrs:{color:"primary",dark:"","elevation-1":""}},[t(i.Z,{attrs:{icon:""},on:{click:function(t){e.onClickCloseSettingsAlert=!0}}},[t(d.Z,[e._v("mdi-close")])],1),t(y.qW,[e._v("メール設定をしてください")])],1),t(c.ZB,{staticClass:"pt-3"},[t("router-link",{attrs:{to:{path:"/settings"}},nativeOn:{click:function(t){e.onClickCloseSettingsAlert=!0}}},[e._v("設定画面")]),e._v("からメール設定を完了させてください。 ")],1)],1)],1)],1)},x=[],Z=(a(7658),a(629)),w={name:"App",data(){return{appName:"ワークフロー",snackbar:!1,message:"",isActiveAdminMenu:!0,onClickCloseSettingsAlert:!1,adminMenuItems:[{title:"管理者設定",link:"/admins"},{title:"部署設定",link:"/departments"},{title:"従業員設定",link:"/users"},{title:"申請ルート設定",link:"/routes"}]}},computed:{...(0,Z.rn)({authMessage:e=>e.firebase.authMessage,workflowMessage:e=>e.firestore.workflowMessage,settingsMessage:e=>e.workflow.settingsMessage,showSettingsMessage:e=>e.workflow.showSettingsMessage,isAdmin:e=>e.firebase.isAdmin}),...(0,Z.Se)({userName:"firebase/getUserName",userIcon:"firebase/getUserIcon",isAuth:"firebase/getLoginStatus",getSettings:"workflow/getSettings"}),isRoot(){const e=this.$route.path;return"/"==e},showSettingsAlert(){const e=this.isAuth,t=this.onClickCloseSettingsAlert,a=()=>{const e=this.getSettings,t=[""==e.apiUrl,""==e.authToken];return t.some((e=>1==e))},s=[e,a(),!t];return s.every((e=>1==e))}},methods:{...(0,Z.nv)({toggleShowSettingsMessage:"workflow/toggleShowSettingsMessage"}),async logout(){await this.$store.dispatch("firebase/logout")},toRoot(){const e=this.$route.path;"/"!=e?this.$router.push("/"):this.$router.go({path:"/",force:!0})},setSiteTitle(){document.title=this.appName}},created(){this.setSiteTitle()},beforeCreate(){this.$store.dispatch("workflow/loadSettings")},watch:{authMessage(){this.message=this.authMessage,this.snackbar=!0},workflowMessage(){this.message=this.workflowMessage,this.snackbar=!0},showSettingsMessage(){const e=this.showSettingsMessage;e&&(this.message=this.settingsMessage,this.snackbar=!0,this.toggleShowSettingsMessage())}}},T=w,B=a(1001),A=(0,B.Z)(T,D,x,!1,null,null,null),C=A.exports,S=a(8345),R=a(9669),I=a.n(R);const $=I().create({headers:{"content-type":"text/plain"}});$.interceptors.response.use((e=>e.data.error?Promise.reject(e.data.error):Promise.resolve(e)),(e=>Promise.reject(e)));let N="";const P=e=>{N=e};let E="";const U=e=>{E=e},M=e=>$.post(N,{method:"POST",authToken:E,params:{emailConfig:e}});var O={setUrl:P,setAuthToken:U,sendEmail:M};const j={settings:{apiUrl:"",authToken:""},showSettingsMessage:!1,settingsMessage:""},H={saveSettings(e,{settings:t}){e.settings={...t};const{apiUrl:a,authToken:s}=e.settings;O.setUrl(a),O.setAuthToken(s),localStorage.setItem("settings",JSON.stringify(t))},loadSettings(e){const t=JSON.parse(localStorage.getItem("settings"));t&&(e.settings=Object.assign(e.settings,t));const{apiUrl:a,authToken:s}=e.settings;O.setUrl(a),O.setAuthToken(s)},toggleShowSettingsMessage(e){e.showSettingsMessage=!e.showSettingsMessage},setSettingsMessage(e,t){e.settingsMessage=t}},V={saveSettings({commit:e},{settings:t}){e("toggleShowSettingsMessage"),e("saveSettings",{settings:t}),e("setSettingsMessage","設定を保存しました。")},loadSettings({commit:e}){e("loadSettings")},toggleShowSettingsMessage({commit:e}){e("toggleShowSettingsMessage")}},L={getSettings(e){return e.settings}};var F={namespaced:!0,state:j,mutations:H,actions:V,getters:L},J=a(3387);const W={loggedIn:!1,userUid:"",userName:"",userIcon:"",userEmail:"",isAdmin:!1,authMessage:""},Y={setLoginStatus(e,t){e.loggedIn=t},setUserUid(e,t){e.userUid=t},setUserName(e,t){e.userName=t},setUserIcon(e,t){e.userIcon=t},setUserEmail(e,t){e.userEmail=t},setAdminStatus(e,t){e.isAdmin=t},setAuthMessage(e,t){e.authMessage=t}},Q={async login({commit:e}){console.log("login action");const t=new J.hJ,a=(0,J.v0)();await(0,J.rh)(a,t).then((t=>{const a=t.user;e("setUserUid",a.uid),e("setUserName",a.displayName),e("setUserIcon",a.photoURL),e("setUserEmail",a.email),e("setAuthMessage","ログインしました。"),console.log("login success")})).catch((e=>{const t=e.code,a=e.message;console.log("login error: ",t,a)})),await(0,J.Fb)(a,J.a$).then((()=>{console.log("keeping state")})).catch((e=>{const t=e.code,a=e.message;console.log("keeping state error: ",t,a)}))},logout({commit:e}){const t=(0,J.v0)();(0,J.w7)(t).then((()=>{e("setAuthMessage","ログアウトしました。"),console.log("logout success"),e("setLoginStatus",!1)})).catch((e=>{console.log("logout error",e)}))},async onAuth({commit:e,dispatch:t,rootGetters:a}){const s=async s=>{try{await t("firestore/fetchAllCollections",{currentTableName:"admins"},{root:!0});const r=a["firestore/getAdminEmails"],n=r.includes(s.email);return e("setAdminStatus",n),n}catch(r){return!1}},r=(0,J.v0)();(0,J.Aj)(r,(t=>{t=t||{},e("setLoginStatus",!!t.uid),e("setUserUid",t.uid),e("setUserName",t.displayName),e("setUserIcon",t.photoURL),e("setUserEmail",t.email);const a=s(t);e("setAdminStatus",a),console.log("onAuth")}))}},G={getLoginStatus(e){return e.loggedIn},getIsAdmin(e){return e.isAdmin},getUserUid(e){return e.userUid},getUserName(e){return e.userName},getUserIcon(e){return e.userIcon},getUserEmail(e){return e.userEmail}};var z={namespaced:!0,state:W,mutations:Y,actions:Q,getters:G},K=a(3977),X=a(9828);const ee={apiKey:"AIzaSyCheZvfsN7MBNDc2gAPcwbH9uXREw8vlJo",authDomain:"vue-gas-workflow-auth.firebaseapp.com",projectId:"vue-gas-workflow-auth",storageBucket:"vue-gas-workflow-auth.appspot.com",messagingSenderId:{NODE_ENV:"production",VUE_APP_APIKEY:"AIzaSyCheZvfsN7MBNDc2gAPcwbH9uXREw8vlJo",VUE_APP_AUTHDOMAIN:"vue-gas-workflow-auth.firebaseapp.com",VUE_APP_PROJECTID:"vue-gas-workflow-auth",VUE_APP_STORAGEBUCKET:"vue-gas-workflow-auth.appspot.com",VUE_APP_MESSAGINGSENDERID:"1046023525328",VUE_APP_APPID:"1:1046023525328:web:b7e1344c644108f2ccdfd5",VUE_APP_EMAIL_HOST:"mail.fts-com.jp",VUE_APP_EMAIL_USER:"admin-workflow@fts-com.jp",VUE_APP_EMAIL_PASS:"pafw14#9999",VUE_APP_EMAIL_FROM:"管理者<admin-workflow@fts-com.jp>",VUE_APP_EMAIL_TO:"masaki@fts-com.jp",BASE_URL:"/ftsworkflow/"}.VUE_APP_MESSAGESENDER,appId:"1:1046023525328:web:b7e1344c644108f2ccdfd5"},te=(0,K.ZF)(ee),ae=(0,X.ad)(te);var se=ae;const re={workflowMessage:"",requests:[],myRequests:[],othersRequests:[],details:[],users:[],departments:[],routes:[],admins:[],testFormData:[],userInfo:"",arrayRoute:[],selectedTabName:""},ne={setWorkflowMessage(e,t){e.workflowMessage=t},setState(e,{collections:t,currentTableName:a}){e[a]=t},addState(e,{item:t,currentTableName:a}){const s=e[a];s.push(t)},updateState(e,{item:t,currentTableName:a}){const s=e[a],r=s.findIndex((e=>e.id===t.id));s.splice(r,1,t)},deleteState(e,{id:t,currentTableName:a}){const s=e[a],r=s.findIndex((e=>e.id===t));s.splice(r,1)},setUserInfo(e,{userInfo:t}){e.userInfo=t},setArrayRoute(e,{route:t}){e.arrayRoute=t},setSelectedTabName(e,{selectedTabName:t}){e.selectedTabName=t}},oe={async fetchAllCollections({commit:e},{currentTableName:t}){const a=(0,X.IO)((0,X.hJ)(se,t)),s=await(0,X.PL)(a),r=[];s.forEach((e=>{r.push({...e.data(),id:e.id})})),e("setState",{collections:r,currentTableName:t})},async addDocument({commit:e},{item:t,currentTableName:a}){const s=(0,X.hJ)(se,a),r=await(0,X.ET)(s,t),n=await(0,X.QT)(r),o={...n.data(),id:n.id};e("addState",{item:o,currentTableName:a}),e("setWorkflowMessage","データを追加しました。")},async addDocumentWithTextId({commit:e},{item:t,currentTableName:a}){const s=(0,X.JU)(se,a,t.id);await(0,X.pl)(s,t);const r=await(0,X.QT)(s),n=r.data();e("addState",{item:n,currentTableName:a})},async updateDocument({commit:e},{item:t,currentTableName:a}){const s=(0,X.JU)(se,a,t.id);await(0,X.r7)(s,t),e("updateState",{item:t,currentTableName:a}),e("setWorkflowMessage","データを更新しました。")},async deleteDocument({commit:e},{item:t,currentTableName:a}){const s=t.id,r=(0,X.JU)(se,a,t.id);await(0,X.oe)(r,t),e("deleteState",{id:s,currentTableName:a}),e("setWorkflowMessage","データを削除しました。")},async fetchCollectionsByOneQuery({commit:e},{currentTableName:t,customQuery:a}){const s=(0,X.IO)((0,X.hJ)(se,t),(0,X.ar)(a.field,a.compare,a.value)),r=await(0,X.PL)(s),n=[];r.forEach((e=>{n.push({...e.data(),id:e.id})})),e("setState",{collections:n,currentTableName:t})},async fetchCollectionByDocId({commit:e},{currentTableName:t,docId:a}){const s=(0,X.JU)(se,t,a),r=await(0,X.QT)(s),n={...r.data(),id:r.id};e("setState",{collections:n,currentTableName:t})},async fetchMyDetail({commit:e},{userId:t,docId:a}){const s=(0,X.JU)(se,"users",t,"requests",a),r=await(0,X.QT)(s),n=r.data();e("setState",{collections:n,currentTableName:"requests"})},async fetchOthersDetail({commit:e},{userId:t,docId:a}){const s=(0,X.IO)((0,X.B$)(se,"requests"),(0,X.ar)("id","==",a),(0,X.ar)("common.current_approver_email","==",t)),r=await(0,X.PL)(s),n=[];r.forEach((e=>{n.push({...e.data(),id:e.id})}));const o=n[0];e("setState",{collections:o,currentTableName:"requests"})},async fetchRequest({commit:e},{userId:t,docId:a}){const s=(0,X.JU)(se,"users",t,"requests",a),r=await(0,X.QT)(s),n=r.data();e("setState",{collections:n,currentTableName:"requests"})},async fetchMyRequests({commit:e},{userId:t}){const a=(0,X.hJ)(se,"users",t,"requests"),s=await(0,X.PL)(a),r=[];s.forEach((e=>{r.push({...e.data(),id:e.id})})),e("setState",{collections:r,currentTableName:"myRequests"})},async fetchOthersRequests({commit:e},{userId:t}){const a=(0,X.IO)((0,X.B$)(se,"requests"),(0,X.ar)("common.current_approver_email","==",t)),s=await(0,X.PL)(a),r=[];s.forEach((e=>{r.push({...e.data(),id:e.id})})),e("setState",{collections:r,currentTableName:"othersRequests"})},async addDocumentAsSubCollection({commit:e},{uid:t,userId:a,item:s}){const r=(0,X.JU)(se,"users",a,"requests",t);await(0,X.pl)(r,s);const n=await(0,X.QT)(r),o=n.data();e("addState",{item:o,currentTableName:"myRequests"}),e("setWorkflowMessage","申請を提出しました。")},async updateDocumentInSubCollection({commit:e},{docId:t,userId:a,item:s}){const r=(0,X.JU)(se,"users",a,"requests",t);await(0,X.pl)(r,s);const n=await(0,X.QT)(r),o=n.data();e("setState",{item:o,currentTableName:"requests"}),e("setWorkflowMessage","申請を再提出しました。")},async batchAddSubCollectionsToUsers({commit:e},{uid:t,userId:a,item:s}){const r=(0,X.qs)(se),n=(0,X.JU)(se,"users",a,"requests",t),o=(0,X.JU)(se,"users",a,"requests",t,"details",t);r.set(n,s.request),r.set(o,s.detail),await r.commit();const i=await(0,X.QT)(n),l={...i.data(),id:t};e("addState",{item:l,currentTableName:"myRequests"}),e("setWorkflowMessage","申請を提出しました。")},async updateSubCollection({commit:e},{userId:t,docId:a,item:s,operationType:r}){const n=(0,X.JU)(se,"users",t,"requests",a);await(0,X.r7)(n,s),e("setState",{item:s,currentTableName:"requests"}),e("setWorkflowMessage",`申請を${r}しました。`)},async fetchUserInfo({commit:e},{userId:t}){const a=await(0,X.QT)((0,X.JU)(se,"users",t)),s=a.data();e("setUserInfo",{userInfo:s})},async createArrayRoute({commit:e},{requestTypeValue:t,department:a}){const s=await ie(t,a);e("setArrayRoute",{route:s})},setSelectedTabName({commit:e},{selectedTabName:t}){e("setSelectedTabName",{selectedTabName:t})},async sendEmail({commit:e},{emailConfig:t}){await O.sendEmail(t),e("setWorkflowMessage","メール送信しました。")},async fetchMyTestFormData({commit:e},{userId:t,docId:a}){const s=(0,X.JU)(se,"users",t,"testFormData",a),r=await(0,X.QT)(s),n=r.data();e("setState",{collections:n,currentTableName:"testFormData"}),e("setWorkflowMessage","データを取得しました。")}};async function ie(e,t){const a="routes",s=(0,X.IO)((0,X.hJ)(se,a),(0,X.ar)("request_type","==",e),(0,X.ar)("department","==",t)),r=await(0,X.PL)(s),n=[];return r.forEach((e=>{n.push({...e.data(),id:e.id})})),n}const le={getArrayRoute(e){return e.arrayRoute},getAdminEmails(e){const t=[];return e.admins.map((e=>{t.push(e.id)})),t}};var ce={namespaced:!0,state:re,mutations:ne,actions:oe,getters:le};s.ZP.use(Z.ZP);var ue=new Z.ZP.Store({modules:{workflow:F,firebase:z,firestore:ce}}),me=a(266),de=a(1713),pe=function(){var e=this,t=e._self._c;return t(de.Z,{attrs:{justify:"center"}},[t(me.Z,{attrs:{cols:"12",sm:"12",md:"4"}},[t(l.Z,{attrs:{height:"200px"}},[t(c.EB,{staticClass:"justify-center",attrs:{"mb-3":""}},[t("h1",{staticClass:"display-1"},[e._v("ログイン")])]),t(c.h7,{staticClass:"justify-center"},[t(i.Z,{staticStyle:{"text-transform":"none"},attrs:{width:"80%"},on:{click:e.loginWithGoogle}},[t("svg",{staticClass:"mr-3",attrs:{width:"18",height:"18",viewBox:"0 0 18 18"}},[t("path",{attrs:{d:"M16.51 8H8.98v3h4.3c-.18 1-.74 1.48-1.6 2.04v2.01h2.6a7.8 7.8 0 002.38-5.88c0-.57-.05-.66-.15-1.18z",fill:"#4285F4"}}),t("path",{attrs:{d:"M8.98 17c2.16 0 3.97-.72 5.3-1.94l-2.6-2a4.8 4.8 0 01-7.18-2.54H1.83v2.07A8 8 0 008.98 17z",fill:"#34A853"}}),t("path",{attrs:{d:"M4.5 10.52a4.8 4.8 0 010-3.04V5.41H1.83a8 8 0 000 7.18l2.67-2.07z",fill:"#FBBC05"}}),t("path",{attrs:{d:"M8.98 4.18c1.17 0 2.23.4 3.06 1.2l2.3-2.3A8 8 0 001.83 5.4L4.5 7.49a4.77 4.77 0 014.48-3.3z",fill:"#EA4335"}})]),e._v(" Login with Google ")])],1)],1)],1)],1)},he=[],fe={name:"Login",data(){return{redirect:null}},methods:{async loginWithGoogle(){this.redirect=this.$route.query.redirect,await this.$store.dispatch("firebase/login"),this.redirect?this.$router.push(this.redirect):this.$router.push("/")}}},_e=fe,ge=(0,B.Z)(_e,pe,he,!1,null,null,null),ve=ge.exports,be=a(5125),ke=a(7808),qe=function(){var e=this,t=e._self._c;return t(de.Z,{attrs:{justify:"center"}},[t(me.Z,{attrs:{cols:"12",md:"6",xs:"12"}},[t(l.Z,[t(c.ZB,[t("p",[e._v("※設定はこのデバイスのみに保存されます。"),t("br"),e._v("デバイスごとに設定を保存してください。")]),t(be.Z,{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("h3",[e._v("アプリ設定")]),t(ke.Z,{attrs:{label:"API URL",counter:150,rules:e.apiUrlRules},model:{value:e.settings.apiUrl,callback:function(t){e.$set(e.settings,"apiUrl",t)},expression:"settings.apiUrl"}}),t(ke.Z,{attrs:{label:"Auth Token",counter:36,rules:e.authTokenRules},model:{value:e.settings.authToken,callback:function(t){e.$set(e.settings,"authToken",t)},expression:"settings.authToken"}}),t(de.Z,{staticClass:"mt-4 px-3 pb-3"},[t(k.Z),t(i.Z,{attrs:{color:"primary",disabled:!e.valid||e.saveButtonDisabled},on:{click:e.onClickSave}},[e._v("保存")])],1)],1)],1)],1)],1)],1)},ye=[],De={name:"Settings",data(){return{settings:{...this.$store.state.workflow.settings},valid:!1,saveButtonDisabled:!1,apiUrlRules:[e=>e.trim().length>0||"API URLは必須です",e=>e.trim().length<=150||"150文字以内で入力してください"],authTokenRules:[e=>e.trim().length>0||"Auth Tokenは必須です",e=>36==e.trim().length||"36文字で入力してください"]}},methods:{onClickSave(){this.$store.dispatch("workflow/saveSettings",{settings:this.settings}),this.saveButtonDisabled=!this.saveButtonDisabled}}},xe=De,Ze=(0,B.Z)(xe,qe,ye,!1,null,null,null),we=Ze.exports,Te=a(1154),Be=a(4127),Ae=a(3863),Ce=a(626),Se=a(762),Re=function(){var e=this,t=e._self._c;return t("div",[t(de.Z,[t(me.Z,{attrs:{cols:"12",md:"6",xs:"12"}},[t(Se.Z,{attrs:{grow:"",color:"primaryDarken"}},[t(Ce.Z,{on:{click:function(t){return e.onClickTab("myRequests")}}},[e._v("自分の申請")]),t(Ce.Z,{on:{click:function(t){return e.onClickTab("othersRequests")}}},[e.numberOfOthersRequests?[t(Te.Z,{attrs:{color:"info",content:e.numberOfOthersRequests}},[e._v("承認依頼")])]:[e._v("承認依頼")]],2)],1)],1)],1),t(l.Z,[t(c.EB,[t(me.Z,{attrs:{cols:"8"}},[t("div",{staticClass:"h5"},[e._v(" "+e._s(e.title)+" ")])]),t(k.Z),t(me.Z,{staticClass:"text-right",attrs:{cols:"4"}},[t(i.Z,{attrs:{dark:"",color:"secondary"},on:{click:e.onClickAdd}},[t(d.Z,[e._v("mdi-plus")])],1)],1),t(me.Z,{attrs:{cols:"12"}},[t(ke.Z,{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),t(Ae.Z,{staticClass:"text-no-wrap",attrs:{headers:e.tableHeaders,items:e.tableData,search:e.search,"footer-props":e.footerProps,"sort-by":"common.created_at","sort-desc":!0,"items-per-page":30,"mobile-breakpoint":"0"},on:{"click:row":e.onClickRow},scopedSlots:e._u([{key:"item.common.created_at",fn:function({item:t}){return[e._v(e._s(e.formatDate(t)))]}},{key:"item.common.status",fn:function({item:a}){return[t(Be.Z,{staticClass:"ma-2",attrs:{color:e.statusColor(a),"text-color":"white"}},[t(d.Z,{attrs:{left:""}},[e._v(" "+e._s(e.statusIcon(a))+" ")]),e._v(" "+e._s(a.common.status)+" ")],1)]}}],null,!0)})],1),t("ItemDialogRequests",{ref:"ItemDialogRequests"})],1)},Ie=[],$e=a(3486),Ne=a(1030),Pe=a(9223),Ee=a(8419),Ue=a(6379),Me=a(9481),Oe=a(2648),je=function(){var e=this,t=e._self._c;return t(m.Z,{attrs:{scrollable:"",persistent:"","max-width":"500px",eager:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t(l.Z,[t(c.EB,[e._v(e._s(e.titleText))]),t(Pe.Z),t(c.ZB,[t(be.Z,{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(Me.Z,{attrs:{label:"申請種別",items:e.selectReqestType,rules:e.requestTypeRules,disabled:"edit"==e.actionType,"return-object":""},model:{value:e.formBind.common.request_type,callback:function(t){e.$set(e.formBind.common,"request_type",t)},expression:"formBind.common.request_type"}}),t(ke.Z,{attrs:{label:"タイトル",placeholder:"入力は任意です","persistent-placeholder":""},model:{value:e.formBind.common.title,callback:function(t){e.$set(e.formBind.common,"title",t)},expression:"formBind.common.title"}}),"paid_leave"==e.formBind.common.request_type.value?t("div",[t(Oe.Z,{attrs:{label:"事由",placeholder:"例: 私用のため","persistent-placeholder":"",rules:e.reasonRules,rows:"3"},model:{value:e.formBind.unique.paid_leave.reason,callback:function(t){e.$set(e.formBind.unique.paid_leave,"reason",t)},expression:"formBind.unique.paid_leave.reason"}}),t(v.Z,{ref:"menuDate",attrs:{"close-on-content-click":!1,"return-value":e.formBind.unique.paid_leave.date,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){return e.$set(e.formBind.unique.paid_leave,"date",t)},"update:return-value":function(t){return e.$set(e.formBind.unique.paid_leave,"date",t)}},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(ke.Z,e._g({attrs:{label:"日付",readonly:"",rules:e.dateRules},model:{value:e.formBind.unique.paid_leave.date,callback:function(t){e.$set(e.formBind.unique.paid_leave,"date",t)},expression:"formBind.unique.paid_leave.date"}},a))]}}],null,!1,2727101348),model:{value:e.menuDate,callback:function(t){e.menuDate=t},expression:"menuDate"}},[t(Ne.Z,{attrs:{type:"date",color:"primary",locale:"ja-jp","no-title":"",scrollable:"","day-format":e=>new Date(e).getDate()},model:{value:e.formBind.unique.paid_leave.date,callback:function(t){e.$set(e.formBind.unique.paid_leave,"date",t)},expression:"formBind.unique.paid_leave.date"}},[t(k.Z),t(i.Z,{attrs:{text:"",color:"grey"},on:{click:function(t){e.menuDate=!1}}},[e._v("キャンセル")]),t(i.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menuDate.save(e.formBind.unique.paid_leave.date)}}},[e._v("選択")])],1)],1),t(Ue.Z,{attrs:{label:"半日または終日",rules:e.lengthRules},model:{value:e.formBind.unique.paid_leave.length,callback:function(t){e.$set(e.formBind.unique.paid_leave,"length",t)},expression:"formBind.unique.paid_leave.length"}},[t(Ee.Z,{attrs:{label:"半日",value:"half_day"}}),t(Ee.Z,{attrs:{label:"終日",value:"full_day"}})],1),t(ke.Z,{attrs:{label:"緊急連絡先",rules:e.contactRules},model:{value:e.formBind.unique.paid_leave.contact,callback:function(t){e.$set(e.formBind.unique.paid_leave,"contact",t)},expression:"formBind.unique.paid_leave.contact"}}),t(Oe.Z,{attrs:{label:"備考",rows:"3"},model:{value:e.formBind.unique.paid_leave.memo,callback:function(t){e.$set(e.formBind.unique.paid_leave,"memo",t)},expression:"formBind.unique.paid_leave.memo"}})],1):"equipment"==e.formBind.common.request_type.value?t("div",[t(Oe.Z,{attrs:{label:"商品名",placeholder:"例: https://example.com/JLDZGFYP\n3個","persistent-placeholder":"",rules:e.itemNameRules,rows:"3"},model:{value:e.formBind.unique.equipment.item_name,callback:function(t){e.$set(e.formBind.unique.equipment,"item_name",t)},expression:"formBind.unique.equipment.item_name"}}),t(Oe.Z,{attrs:{label:"購入理由",placeholder:"例: 〇〇で必要なため","persistent-placeholder":"",rules:e.reasonRules,rows:"3"},model:{value:e.formBind.unique.equipment.reason,callback:function(t){e.$set(e.formBind.unique.equipment,"reason",t)},expression:"formBind.unique.equipment.reason"}}),t(Oe.Z,{attrs:{label:"備考",rows:"3"},model:{value:e.formBind.unique.equipment.memo,callback:function(t){e.$set(e.formBind.unique.equipment,"memo",t)},expression:"formBind.unique.equipment.memo"}})],1):"hosting"==e.formBind.common.request_type.value?t("div",[t(ke.Z,{attrs:{label:"顧客名",placeholder:"法人格を省略せず正確に記入してください","persistent-placeholder":"",rules:e.customerNameRules},model:{value:e.formBind.unique.hosting.customer_name,callback:function(t){e.$set(e.formBind.unique.hosting,"customer_name",t)},expression:"formBind.unique.hosting.customer_name"}}),t(ke.Z,{attrs:{label:"ドメイン名",placeholder:"半角英数で正確に記入してください","persistent-placeholder":"",rules:e.domainNameRules},model:{value:e.formBind.unique.hosting.domain_name,callback:function(t){e.$set(e.formBind.unique.hosting,"domain_name",t)},expression:"formBind.unique.hosting.domain_name"}}),t(Me.Z,{attrs:{label:"取得方法",placeholder:"ドメインの管理状況を選択してください","persistent-placeholder":"",items:e.selectAcquireType,rules:e.acquireTypeRules,"return-object":"","append-icon":""==e.formBind.unique.hosting.acquire_type?"mdi-menu-down":"mdi-close"},on:{"click:append":e.clearAcquireType},model:{value:e.formBind.unique.hosting.acquire_type,callback:function(t){e.$set(e.formBind.unique.hosting,"acquire_type",t)},expression:"formBind.unique.hosting.acquire_type"}}),t(Ue.Z,{attrs:{label:"ドメイン取得日",rules:e.acquireDateRadioRules},model:{value:e.formBind.unique.hosting.acquire_date_radio,callback:function(t){e.$set(e.formBind.unique.hosting,"acquire_date_radio",t)},expression:"formBind.unique.hosting.acquire_date_radio"}},[t(Ee.Z,{attrs:{label:"今すぐ",value:"just_now"},on:{click:function(t){e.formBind.unique.hosting.acquire_date_picker=""}}}),t(Ee.Z,{attrs:{label:"指定日あり",value:"scheduled"}})],1),t(v.Z,{ref:"menuAcquireDatePicker",attrs:{"close-on-content-click":!1,"return-value":e.formBind.unique.hosting.acquire_date_picker,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){return e.$set(e.formBind.unique.hosting,"acquire_date_picker",t)},"update:return-value":function(t){return e.$set(e.formBind.unique.hosting,"acquire_date_picker",t)}},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(ke.Z,e._g({staticClass:"mt-0 pt-0",attrs:{label:"指定日を選択してください。",readonly:"",rules:[e.aquireDatePickerRules],disabled:"scheduled"!=e.formBind.unique.hosting.acquire_date_radio},model:{value:e.formBind.unique.hosting.acquire_date_picker,callback:function(t){e.$set(e.formBind.unique.hosting,"acquire_date_picker",t)},expression:"formBind.unique.hosting.acquire_date_picker"}},a))]}}]),model:{value:e.menuAcquireDatePicker,callback:function(t){e.menuAcquireDatePicker=t},expression:"menuAcquireDatePicker"}},[t(Ne.Z,{attrs:{type:"date",color:"primary",locale:"ja-jp","no-title":"",scrollable:"","day-format":e=>new Date(e).getDate()},model:{value:e.formBind.unique.hosting.acquire_date_picker,callback:function(t){e.$set(e.formBind.unique.hosting,"acquire_date_picker",t)},expression:"formBind.unique.hosting.acquire_date_picker"}},[t(k.Z),t(i.Z,{attrs:{text:"",color:"grey"},on:{click:function(t){e.menuAcquireDatePicker=!1}}},[e._v("キャンセル")]),t(i.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menuAcquireDatePicker.save(e.formBind.unique.hosting.acquire_date_picker)}}},[e._v("選択")])],1)],1),t(Me.Z,{attrs:{label:"ドメイン移管申請",placeholder:"移管の場合は選択してください","persistent-placeholder":"",items:e.selectTransferRequest,"return-object":"","append-icon":""==e.formBind.unique.hosting.transfer_request?"mdi-menu-down":"mdi-close"},on:{"click:append":e.clearTransferRequest},model:{value:e.formBind.unique.hosting.transfer_request,callback:function(t){e.$set(e.formBind.unique.hosting,"transfer_request",t)},expression:"formBind.unique.hosting.transfer_request"}}),t(Ue.Z,{attrs:{label:"支払方法",rules:e.paymentTypeRules},model:{value:e.formBind.unique.hosting.payment_type,callback:function(t){e.$set(e.formBind.unique.hosting,"payment_type",t)},expression:"formBind.unique.hosting.payment_type"}},[t(Ee.Z,{attrs:{label:"月額",value:"monthly"}}),t(Ee.Z,{attrs:{label:"年間一括",value:"anuually"}})],1),t(ke.Z,{attrs:{label:"料金",rules:e.priceRules},model:{value:e.formBind.unique.hosting.price,callback:function(t){e.$set(e.formBind.unique.hosting,"price",t)},expression:"formBind.unique.hosting.price"}}),t($e.Z,{attrs:{label:"今すぐホスティングを開始する"},model:{value:e.formBind.unique.hosting.start_hosting_immediately,callback:function(t){e.$set(e.formBind.unique.hosting,"start_hosting_immediately",t)},expression:"formBind.unique.hosting.start_hosting_immediately"}}),t(v.Z,{ref:"menuDnsTransferDatePicker",attrs:{"close-on-content-click":!1,"return-value":e.formBind.unique.hosting.dns_transfer_date_picker,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){return e.$set(e.formBind.unique.hosting,"dns_transfer_date_picker",t)},"update:return-value":function(t){return e.$set(e.formBind.unique.hosting,"dns_transfer_date_picker",t)}},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(ke.Z,e._g({staticClass:"mt-0 pt-0",attrs:{label:"DNS切替え日",readonly:""},model:{value:e.formBind.unique.hosting.dns_transfer_date_picker,callback:function(t){e.$set(e.formBind.unique.hosting,"dns_transfer_date_picker",t)},expression:"formBind.unique.hosting.dns_transfer_date_picker"}},a))]}}]),model:{value:e.menuDnsTransferDatePicker,callback:function(t){e.menuDnsTransferDatePicker=t},expression:"menuDnsTransferDatePicker"}},[t(Ne.Z,{attrs:{type:"date",color:"primary",locale:"ja-jp","no-title":"",scrollable:"","day-format":e=>new Date(e).getDate()},model:{value:e.formBind.unique.hosting.dns_transfer_date_picker,callback:function(t){e.$set(e.formBind.unique.hosting,"dns_transfer_date_picker",t)},expression:"formBind.unique.hosting.dns_transfer_date_picker"}},[t(k.Z),t(i.Z,{attrs:{text:"",color:"grey"},on:{click:function(t){e.menuDnsTransferDatePicker=!1}}},[e._v("キャンセル")]),t(i.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menuDnsTransferDatePicker.save(e.formBind.unique.hosting.dns_transfer_date_picker)}}},[e._v("選択")])],1)],1),t(ke.Z,{attrs:{label:"現在のホスティング会社",placeholder:"移管の場合は記入してください","persistent-placeholder":""},model:{value:e.formBind.unique.hosting.current_hosting_service,callback:function(t){e.$set(e.formBind.unique.hosting,"current_hosting_service",t)},expression:"formBind.unique.hosting.current_hosting_service"}}),t(v.Z,{ref:"menuCancelOtherServiceDatePicker",attrs:{"close-on-content-click":!1,"return-value":e.formBind.unique.hosting.cancel_other_service_date_picker,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){return e.$set(e.formBind.unique.hosting,"cancel_other_service_date_picker",t)},"update:return-value":function(t){return e.$set(e.formBind.unique.hosting,"cancel_other_service_date_picker",t)}},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t(ke.Z,e._g({staticClass:"mt-0 pt-0",attrs:{label:"他社への解約依頼日",placeholder:"移管の場合は選択してください","persistent-placeholder":"",readonly:""},model:{value:e.formBind.unique.hosting.cancel_other_service_date_picker,callback:function(t){e.$set(e.formBind.unique.hosting,"cancel_other_service_date_picker",t)},expression:"formBind.unique.hosting.cancel_other_service_date_picker"}},a))]}}]),model:{value:e.menuCancelOtherServiceDatePicker,callback:function(t){e.menuCancelOtherServiceDatePicker=t},expression:"menuCancelOtherServiceDatePicker"}},[t(Ne.Z,{attrs:{type:"date",color:"primary",locale:"ja-jp","no-title":"",scrollable:"","day-format":e=>new Date(e).getDate()},model:{value:e.formBind.unique.hosting.cancel_other_service_date_picker,callback:function(t){e.$set(e.formBind.unique.hosting,"cancel_other_service_date_picker",t)},expression:"formBind.unique.hosting.cancel_other_service_date_picker"}},[t(k.Z),t(i.Z,{attrs:{text:"",color:"grey"},on:{click:function(t){e.menuCancelOtherServiceDatePicker=!1}}},[e._v("キャンセル")]),t(i.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menuCancelOtherServiceDatePicker.save(e.formBind.unique.hosting.cancel_other_service_date_picker)}}},[e._v("選択")])],1)],1),t(Ue.Z,{attrs:{label:"引落し状況",rules:e.paymentStatusRules},model:{value:e.formBind.unique.hosting.payment_status,callback:function(t){e.$set(e.formBind.unique.hosting,"payment_status",t)},expression:"formBind.unique.hosting.payment_status"}},[t(Ee.Z,{attrs:{label:"初めての引落し",value:"first_payment"}}),t(Ee.Z,{attrs:{label:"当社で引落し歴あり",value:"has_past_payment"}})],1),t(Me.Z,{attrs:{label:"引落し開始月",items:e.selectPaymentStartMonth,"return-object":"","append-icon":""==e.formBind.unique.hosting.payment_start_month?"mdi-menu-down":"mdi-close"},on:{"click:append":e.clearPaymentStartMonth},model:{value:e.formBind.unique.hosting.payment_start_month,callback:function(t){e.$set(e.formBind.unique.hosting,"payment_start_month",t)},expression:"formBind.unique.hosting.payment_start_month"}}),t(Me.Z,{attrs:{label:"現サイトデータの処遇",items:e.selectSiteDataHandling,"return-object":"","append-icon":""==e.formBind.unique.hosting.site_data_handling?"mdi-menu-down":"mdi-close",rules:e.siteDataHandlingRules},on:{"click:append":e.clearSiteDataHandling},model:{value:e.formBind.unique.hosting.site_data_handling,callback:function(t){e.$set(e.formBind.unique.hosting,"site_data_handling",t)},expression:"formBind.unique.hosting.site_data_handling"}}),t(Oe.Z,{attrs:{label:"備考",rows:"3"},model:{value:e.formBind.unique.hosting.memo,callback:function(t){e.$set(e.formBind.unique.hosting,"memo",t)},expression:"formBind.unique.hosting.memo"}})],1):e._e()],1)],1),t(Pe.Z),t(c.h7,[t(k.Z),t(i.Z,{attrs:{color:"grey darken-1",text:""},on:{click:e.onClickClose}},[e._v(" キャンセル ")]),t(i.Z,{attrs:{color:"primary",text:"",disabled:!e.valid},on:{click:e.onClickAction}},[e._v(" "+e._s(e.actionText)+" ")])],1)],1)],1)},He=[],Ve=a(1294),Le=a(7632),Fe={name:"ItemDialogRequests",data(){return{selectReqestType:[{text:"休暇申請",value:"paid_leave"},{text:"備品申請",value:"equipment"},{text:"ホスティング申請",value:"hosting"}],selectAcquireType:[{text:"当社で新規取得",value:"new_domain_name_with_us"},{text:"当社で取得済み",value:"exist_domain_name_with_us"},{text:"他社からの移管",value:"domain_transfer_to_us"},{text:"ホスティングのみ当社",value:"only_hosting_with_us"}],selectTransferRequest:[{text:"申請済み",value:"requested"},{text:"未 (客先で申請)",value:"not_done_by_customer"},{text:"未 (当社で申請)",value:"not_done_by_us"}],selectPaymentStartMonth:[{text:"1月",value:"january"},{text:"2月",value:"february"},{text:"3月",value:"march"},{text:"4月",value:"april"},{text:"5月",value:"may"},{text:"6月",value:"june"},{text:"7月",value:"july"},{text:"8月",value:"august"},{text:"9月",value:"september"},{text:"10月",value:"october"},{text:"11月",value:"november"},{text:"12月",value:"december"}],selectSiteDataHandling:[{text:"移動する (他社制作の場合は要相談)",value:"required_transfer"},{text:"移動しない (新規のため)",value:"no_transfer_cause_new_customer"},{text:"移動しない (データも不要)",value:"no_transfer_cause_data_unnecessary"},{text:"移動しない (データは保管/要相談)",value:"no_transfer_but_keep_data"}],show:!1,valid:!1,menuDate:!1,menuAcquireDatePicker:!1,menuDnsTransferDatePicker:!1,menuCancelOtherServiceDatePicker:!1,actionType:"add",formBind:{common:{request_type:{text:"",value:""},current_step:"",max_step:"",status:"",current_approver_email:"",created_at:"",email:"",name:"",department:"",title:"",routes:{approvers:[]},comments:[]},unique:{paid_leave:{reason:"",date:"",length:"",contact:"",memo:""},equipment:{item_name:"",reason:"",memo:""},hosting:{customer_name:"",domain_name:"",acquire_type:"",acquire_date_radio:"",acquire_date_picker:"",transfer_request:"",payment_type:"",price:"",start_hosting_immediately:"",dns_transfer_date_picker:"",current_hosting_service:"",cancel_other_service_date_picker:"",payment_status:"",payment_start_month:"",site_data_handling:"",memo:""}}},requestTypeRules:[e=>Object.keys(e).length>0||"申請種別は必須です"],reasonRules:[e=>e.trim().length>0||"事由は必須です"],dateRules:[e=>e.trim().length>0||"日付は必須です"],lengthRules:[e=>e.trim().length>0||"長さは必須です"],contactRules:[e=>e.trim().length>0||"緊急連絡先は必須です"],itemNameRules:[e=>e.trim().length>0||"商品名は必須です"],customerNameRules:[e=>e.trim().length>0||"顧客名は必須です"],domainNameRules:[e=>e.trim().length>0||"ドメイン名は必須です"],acquireTypeRules:[e=>Object.keys(e).length>0||"取得方法は必須です"],acquireDateRadioRules:[e=>e.trim().length>0||"ドメイン取得日は必須です"],paymentTypeRules:[e=>e.trim().length>0||"支払方法は必須です"],priceRules:[e=>e.trim().length>0||"料金は必須です"],paymentStatusRules:[e=>e.trim().length>0||"引落し状況は必須です"],siteDataHandlingRules:[e=>Object.keys(e).length>0||"現サイトデータの処遇は必須です"]}},computed:{...(0,Z.rn)({userInfo:e=>e.firestore.userInfo}),aquireDatePickerRules(){const e=this.formBind.unique.hosting.acquire_date_radio;if("just_now"==e)return!0;{const e=this.formBind.unique.hosting.acquire_date_picker,t=e.trim().length>0;return t||"ドメイン取得日は必須です"}},titleText(){return"add"===this.actionType?"データ追加":"データ編集"},actionText(){return"add"===this.actionType?"申請":"再申請"}},methods:{...(0,Z.Se)({getUserEmail:"firebase/getUserEmail",getArrayRoute:"firestore/getArrayRoute"}),...(0,Z.nv)({addDocumentAsSubCollection:"firestore/addDocumentAsSubCollection",updateDocumentInSubCollection:"firestore/updateDocumentInSubCollection",fetchUserInfo:"firestore/fetchUserInfo",createArrayRoute:"firestore/createArrayRoute",sendEmail:"firestore/sendEmail"}),open(e,t={}){this.show=!0,this.actionType=e,this.resetForm(t)},onClickClose(){this.show=!1},async onClickAction(){if("add"===this.actionType){const e=(0,Le.Z)(),t=this.getUserEmail(),a=await this.createItem(e,t);await this.addDocumentAsSubCollection({uid:e,userId:t,item:a}),this.show=!1;const s=a.common.current_approver_email;this.notifyToApprover(s,a)}else{const e=this.getUserEmail(),t=this.formBind.id,a=this.updateItem();console.log(a),await this.updateDocumentInSubCollection({userId:e,docId:t,item:a}),this.show=!1,this.$emit("submitEdit",a);const s=a.common.routes.approvers[0].email;this.$emit("submitOnClickAction",s)}},notifyToApprover(e,t){const a=e,s=`[承認依頼] [${t.common.title}]`,r=`${window.location.href}others/requests/${t.id}`,n=this.createEmailBody(s,r),o={to:a,subject:s,body:n};this.sendEmail({emailConfig:o})},updateItem(){const e=this.formBind;return e.common.current_approver_email=e.common.routes.approvers[0].email,e.common.current_step=1,e.common.status="保留中",e.common.routes.approvers.forEach((e=>{e.status="保留中"})),e},async createItem(e,t){const a=this.formBind.common.request_type.value;await this.fetchUserInfo({userId:t});const s=this.userInfo.department;await this.createArrayRoute({requestTypeValue:a,department:s});const r=this.getArrayRoute()[0],n=[];r.approvers.forEach((e=>{n.push({...e,status:"保留中"}),r.approvers=n}));const o=1,i=r.approvers.length,l=e=>{switch(e){case"paid_leave":{const e={paid_leave:{reason:this.formBind.unique.paid_leave.reason,date:this.formBind.unique.paid_leave.date,length:this.formBind.unique.paid_leave.length,contact:this.formBind.unique.paid_leave.contact,memo:this.formBind.unique.paid_leave.memo}};return e}case"equipment":{const e={equipment:{item_name:this.formBind.unique.equipment.item_name,reason:this.formBind.unique.equipment.reason,memo:this.formBind.unique.equipment.memo}};return e}case"hosting":{const e={hosting:{customer_name:this.formBind.unique.hosting.customer_name,domain_name:this.formBind.unique.hosting.domain_name,acquire_type:this.formBind.unique.hosting.acquire_type,acquire_date_radio:this.formBind.unique.hosting.acquire_date_radio,acquire_date_picker:this.formBind.unique.hosting.acquire_date_picker,transfer_request:this.formBind.unique.hosting.transfer_request,payment_type:this.formBind.unique.hosting.payment_type,price:this.formBind.unique.hosting.price,start_hosting_immediately:this.formBind.unique.hosting.start_hosting_immediately,dns_transfer_date_picker:this.formBind.unique.hosting.dns_transfer_date_picker,current_hosting_service:this.formBind.unique.hosting.current_hosting_service,cancel_other_service_date_picker:this.formBind.unique.hosting.cancel_other_service_date_picker,payment_status:this.formBind.unique.hosting.payment_status,payment_start_month:this.formBind.unique.hosting.payment_start_month,site_data_handling:this.formBind.unique.hosting.site_data_handling,memo:this.formBind.unique.hosting.memo}};return e}}},c=l(a),u={id:e,common:{request_type:this.formBind.common.request_type,current_step:o,max_step:i,status:"保留中",current_approver_email:r.approvers[0].email,created_at:(0,Ve.Bt)(),email:this.userInfo.id,name:this.userInfo.name,department:this.userInfo.department,title:this.formBind.common.title,routes:{approvers:r.approvers},comments:[]},unique:{...c}};return u},resetForm(e){if("edit"==this.actionType)this.formBind=JSON.parse(JSON.stringify(e)),this.formBind.common.created_at=e.common.created_at;else{const e=Object.keys(this.formBind.common);e.forEach((e=>{this.formBind.common[e]=""}));const t=Object.keys(this.formBind.unique);t.forEach((e=>{const t=Object.keys(this.formBind.unique[e]);t.forEach((t=>{this.formBind.unique[e][t]=""}))}))}this.$refs.form.resetValidation()},clearAcquireType(){this.formBind.unique.hosting.acquire_type=""},clearTransferRequest(){this.formBind.unique.hosting.transfer_request=""},clearPaymentStartMonth(){this.formBind.unique.hosting.payment_start_month=""},clearSiteDataHandling(){this.formBind.unique.hosting.site_data_handling=""},createEmailBody(e,t){const a=`${e}<br><br>詳細は下記リンクからご確認ください。<br><br><a href="${t}">${t}</a>`;return a}}},Je=Fe,We=(0,B.Z)(Je,je,He,!1,null,null,null),Ye=We.exports,Qe=a(7638),Ge=a.n(Qe);const ze={showScrollHint(){const e=document.getElementsByTagName("table")[0],t=e.parentElement;t.classList.add("js-scrollable"),new(Ge())(".js-scrollable",{i18n:{scrollable:"スクロールできます"}})}};var Ke={name:"RequestOverView",components:{ItemDialogRequests:Ye},data(){return{currentTableName:"myRequests",title:"申請一覧",search:"",tableData:[]}},computed:{...(0,Z.rn)({myRequests:e=>e.firestore.myRequests,othersRequests:e=>e.firestore.othersRequests,selectedTabName:e=>e.firestore.selectedTabName}),...(0,Z.Se)({getUserEmail:"firebase/getUserEmail"}),tableHeaders(){return[{text:"作成日時",value:"common.created_at"},{text:"申請種別",value:"common.request_type.text",sortable:!1},{text:"ステータス",value:"common.status",sortable:!1},{text:"タイトル",value:"common.title",sortable:!1},{text:"申請者",value:"common.name",sortable:!1},{text:"部署",value:"common.department",sortable:!1}]},footerProps(){return{itemsPerPageText:"",itemsPerPageOptions:[30,-1]}},numberOfOthersRequests(){return this.othersRequests.length}},methods:{...(0,Z.nv)({fetchMyRequests:"firestore/fetchMyRequests",fetchOthersRequests:"firestore/fetchOthersRequests",setSelectedTabName:"firestore/setSelectedTabName"}),onClickAdd(){this.$refs.ItemDialogRequests.open("add")},onClickRow(e){switch(this.selectedTabName){case"myRequests":this.$router.push({path:`/my/requests/${e.id}`});break;case"othersRequests":this.$router.push({path:`/others/requests/${e.id}`});break}},async onClickTab(e){this.setSelectedTabName({selectedTabName:e});const t=this.getUserEmail;switch(e){case"myRequests":await this.fetchMyRequests({userId:t}),this.tableData=this.myRequests;break;case"othersRequests":this.tableData=this.othersRequests;break}},dateToStr24HPad0(e,t){return t||(t="YYYY/MM/DD hh:mm"),t=t.replace(/YYYY/g,e.getFullYear()),t=t.replace(/MM/g,("0"+(e.getMonth()+1)).slice(-2)),t=t.replace(/DD/g,("0"+e.getDate()).slice(-2)),t=t.replace(/hh/g,("0"+e.getHours()).slice(-2)),t=t.replace(/mm/g,("0"+e.getMinutes()).slice(-2)),t=t.replace(/ss/g,("0"+e.getSeconds()).slice(-2)),t},formatDate(e){return this.dateToStr24HPad0(e.common.created_at.toDate())},statusColor(e){let t="";switch(e.common.status){case"完了":t="success";break;case"保留中":t="info";break;case"否認":t="error";break;case"差戻し":t="warning";break}return t},statusIcon(e){let t="";switch(e.common.status){case"完了":t="mdi-check";break;case"保留中":t="mdi-timer-sand";break;case"否認":t="mdi-cancel";break;case"差戻し":t="mdi-arrow-u-left-bottom";break}return t}},async created(){this.setSelectedTabName({selectedTabName:"myRequests"});const e=this.getUserEmail;await this.fetchMyRequests({userId:e}),await this.fetchOthersRequests({userId:e}),this.tableData=this.myRequests},mounted(){ze.showScrollHint()}},Xe=Ke,et=(0,B.Z)(Xe,Re,Ie,!1,null,null,null),tt=et.exports,at=a(8271),st=a(535),rt=a(1744),nt=a(8491),ot=function(){var e=this,t=e._self._c;return 0!=e.formData.length?t("div",[t(de.Z,{attrs:{justify:"center"}},[t(me.Z,{attrs:{cols:"12",md:"6",xs:"12"}},[t(l.Z,[e.$vuetify.breakpoint.xs||e.$vuetify.breakpoint.sm?[t(st.Z,{attrs:{vertical:""},model:{value:e.formData.common.current_step,callback:function(t){e.$set(e.formData.common,"current_step",t)},expression:"formData.common.current_step"}},[e._l(e.formData.common.max_step,(function(a,s){return[void 0!=a?t(nt.Z,{key:`${a}-step`,attrs:{complete:"完了"==e.formData.common.routes.approvers[s].status,step:a,rules:[()=>{const t=["否認"==e.formData.common.routes.approvers[s].status,"差戻し"==e.formData.common.routes.approvers[s].status];return!t.some((e=>1==e))}]}},[e._v(" "+e._s(e.formData.common.routes.approvers[s].name)+" "),t("small",{staticClass:"mt-2"},[e._v(e._s(e.formData.common.routes.approvers[s].status))])]):e._e(),a<e.formData.common.max_step?t("div",{key:`${a}-div`,staticStyle:{"border-left":"1px solid rgba(0,0,0,.25)",height:"30px","margin-left":"36px"}}):e._e()]}))],2)]:[t(st.Z,{attrs:{"alt-labels":""},model:{value:e.formData.common.current_step,callback:function(t){e.$set(e.formData.common,"current_step",t)},expression:"formData.common.current_step"}},[t(rt.Rp,[e._l(e.formData.common.max_step,(function(a,s){return[void 0!=a?t(nt.Z,{key:`${a}-step`,attrs:{complete:"完了"==e.formData.common.routes.approvers[s].status,step:a,rules:[()=>{const t=["否認"==e.formData.common.routes.approvers[s].status,"差戻し"==e.formData.common.routes.approvers[s].status];return!t.some((e=>1==e))}]}},[e._v(" "+e._s(e.formData.common.routes.approvers[s].name)+" "),t("small",{staticClass:"mt-2"},[e._v(e._s(e.formData.common.routes.approvers[s].status))])]):e._e(),a<e.formData.common.max_step?t(Pe.Z,{key:`${a}-divider`}):e._e()]}))],2)],1)]],2)],1)],1),t(de.Z,{attrs:{justify:"center"}},[t(me.Z,{attrs:{cols:"12",md:"6",xs:"12"}},[t(l.Z,[t(c.ZB,[t(be.Z,{attrs:{readonly:""}},[t(ke.Z,{attrs:{label:"タイトル"},model:{value:e.formData.common.title,callback:function(t){e.$set(e.formData.common,"title",t)},expression:"formData.common.title"}}),t(ke.Z,{attrs:{label:"作成日時"},model:{value:e.formattedDate,callback:function(t){e.formattedDate=t},expression:"formattedDate"}}),t(ke.Z,{attrs:{label:"部署"},model:{value:e.formData.common.department,callback:function(t){e.$set(e.formData.common,"department",t)},expression:"formData.common.department"}}),t(ke.Z,{attrs:{label:"申請者"},model:{value:e.formData.common.name,callback:function(t){e.$set(e.formData.common,"name",t)},expression:"formData.common.name"}}),t(ke.Z,{attrs:{label:"メールアドレス"},model:{value:e.formData.common.email,callback:function(t){e.$set(e.formData.common,"email",t)},expression:"formData.common.email"}}),t(Pe.Z,{staticClass:"mt-4 py-4"}),"paid_leave"==e.requestTypeValue?t("div",[t(Oe.Z,{attrs:{"auto-grow":"",rows:"1",label:"事由"},model:{value:e.formData.unique.paid_leave.reason,callback:function(t){e.$set(e.formData.unique.paid_leave,"reason",t)},expression:"formData.unique.paid_leave.reason"}}),t(ke.Z,{attrs:{label:"日付"},model:{value:e.formData.unique.paid_leave.date,callback:function(t){e.$set(e.formData.unique.paid_leave,"date",t)},expression:"formData.unique.paid_leave.date"}}),t(ke.Z,{attrs:{label:"長さ"},model:{value:e.lengthText,callback:function(t){e.lengthText=t},expression:"lengthText"}}),t(ke.Z,{attrs:{label:"緊急連絡先"},model:{value:e.formData.unique.paid_leave.contact,callback:function(t){e.$set(e.formData.unique.paid_leave,"contact",t)},expression:"formData.unique.paid_leave.contact"}}),t(Oe.Z,{attrs:{"auto-grow":"",rows:"1",label:"備考"},model:{value:e.formData.unique.paid_leave.memo,callback:function(t){e.$set(e.formData.unique.paid_leave,"memo",t)},expression:"formData.unique.paid_leave.memo"}})],1):"equipment"==e.requestTypeValue?t("div",[t(Oe.Z,{attrs:{"auto-grow":"",rows:"1",label:"商品名"},model:{value:e.formData.unique.equipment.item_name,callback:function(t){e.$set(e.formData.unique.equipment,"item_name",t)},expression:"formData.unique.equipment.item_name"}}),t(Oe.Z,{attrs:{"auto-grow":"",rows:"1",label:"購入理由"},model:{value:e.formData.unique.equipment.reason,callback:function(t){e.$set(e.formData.unique.equipment,"reason",t)},expression:"formData.unique.equipment.reason"}}),t(Oe.Z,{attrs:{"auto-grow":"",rows:"1",label:"備考"},model:{value:e.formData.unique.equipment.memo,callback:function(t){e.$set(e.formData.unique.equipment,"memo",t)},expression:"formData.unique.equipment.memo"}})],1):"hosting"==e.requestTypeValue?t("div",[t(ke.Z,{attrs:{label:"顧客名"},model:{value:e.formData.unique.hosting.customer_name,callback:function(t){e.$set(e.formData.unique.hosting,"customer_name",t)},expression:"formData.unique.hosting.customer_name"}}),t(ke.Z,{attrs:{label:"ドメイン名"},model:{value:e.formData.unique.hosting.domain_name,callback:function(t){e.$set(e.formData.unique.hosting,"domain_name",t)},expression:"formData.unique.hosting.domain_name"}}),t(ke.Z,{attrs:{label:"取得方法"},model:{value:e.formData.unique.hosting.acquire_type.text,callback:function(t){e.$set(e.formData.unique.hosting.acquire_type,"text",t)},expression:"formData.unique.hosting.acquire_type.text"}}),t(de.Z,[t(me.Z,{staticClass:"pr-0"},[t(ke.Z,{attrs:{label:"ドメイン取得日","hide-details":""},model:{value:e.acquireDateRadioText,callback:function(t){e.acquireDateRadioText=t},expression:"acquireDateRadioText"}})],1),t(me.Z,[t(ke.Z,{attrs:{label:"指定日"},model:{value:e.formData.unique.hosting.acquire_date_picker,callback:function(t){e.$set(e.formData.unique.hosting,"acquire_date_picker",t)},expression:"formData.unique.hosting.acquire_date_picker"}})],1)],1),t(ke.Z,{attrs:{label:"ドメイン移管申請"},model:{value:e.formData.unique.hosting.transfer_request.text,callback:function(t){e.$set(e.formData.unique.hosting.transfer_request,"text",t)},expression:"formData.unique.hosting.transfer_request.text"}}),t(de.Z,[t(me.Z,{staticClass:"pr-0"},[t(ke.Z,{attrs:{label:"支払方法","hide-details":""},model:{value:e.paymentTypeText,callback:function(t){e.paymentTypeText=t},expression:"paymentTypeText"}})],1),t(me.Z,[t(ke.Z,{attrs:{label:"料金"},model:{value:e.formData.unique.hosting.price,callback:function(t){e.$set(e.formData.unique.hosting,"price",t)},expression:"formData.unique.hosting.price"}})],1)],1),t($e.Z,{staticClass:"mt-0",attrs:{label:"今すぐホスティングを開始する"},model:{value:e.formData.unique.hosting.start_hosting_immediately,callback:function(t){e.$set(e.formData.unique.hosting,"start_hosting_immediately",t)},expression:"formData.unique.hosting.start_hosting_immediately"}}),t(ke.Z,{attrs:{label:"DNS切替え日"},model:{value:e.formData.unique.hosting.dns_transfer_date_picker,callback:function(t){e.$set(e.formData.unique.hosting,"dns_transfer_date_picker",t)},expression:"formData.unique.hosting.dns_transfer_date_picker"}}),t(ke.Z,{attrs:{label:"現在のホスティング会社"},model:{value:e.formData.unique.hosting.current_hosting_service,callback:function(t){e.$set(e.formData.unique.hosting,"current_hosting_service",t)},expression:"formData.unique.hosting.current_hosting_service"}}),t(ke.Z,{attrs:{label:"他社への解約依頼日"},model:{value:e.formData.unique.hosting.cancel_other_service_date_picker,callback:function(t){e.$set(e.formData.unique.hosting,"cancel_other_service_date_picker",t)},expression:"formData.unique.hosting.cancel_other_service_date_picker"}}),t(de.Z,[t(me.Z,{staticClass:"pr-0"},[t(ke.Z,{attrs:{label:"引落し状況","hide-details":""},model:{value:e.paymentStatusText,callback:function(t){e.paymentStatusText=t},expression:"paymentStatusText"}})],1),t(me.Z,[t(ke.Z,{attrs:{label:"引落し開始月"},model:{value:e.formData.unique.hosting.payment_start_month.text,callback:function(t){e.$set(e.formData.unique.hosting.payment_start_month,"text",t)},expression:"formData.unique.hosting.payment_start_month.text"}})],1)],1),t(ke.Z,{attrs:{label:"現サイトデータの処遇"},model:{value:e.formData.unique.hosting.site_data_handling.text,callback:function(t){e.$set(e.formData.unique.hosting.site_data_handling,"text",t)},expression:"formData.unique.hosting.site_data_handling.text"}}),t(Oe.Z,{attrs:{"auto-grow":"",rows:"1",label:"備考"},model:{value:e.formData.unique.hosting.memo,callback:function(t){e.$set(e.formData.unique.hosting,"memo",t)},expression:"formData.unique.hosting.memo"}})],1):e._e()],1)],1)],1)],1)],1),t(at.Z,{attrs:{app:"",padless:""}},[t(me.Z,{staticClass:"text-center",attrs:{col:"12"}},[t(i.Z,{staticClass:"mx-2",attrs:{color:"primary",dark:!e.isDisabledApproveBtn,disabled:e.isDisabledApproveBtn},on:{click:e.onClickApprove}},[e._v("承認")]),t(i.Z,{staticClass:"mx-2",attrs:{color:"primary",dark:!e.isDisabledApproveBtn,disabled:e.isDisabledApproveBtn},on:{click:e.onClickDisapprove}},[e._v("否認")]),t(i.Z,{staticClass:"mx-2",attrs:{color:"primary",dark:!e.isDisabledApproveBtn,disabled:e.isDisabledApproveBtn},on:{click:e.onClickRemand}},[e._v("差戻し")]),t(i.Z,{staticClass:"mx-2",attrs:{color:"primary",dark:!e.isDisabledEditBtn,disabled:e.isDisabledEditBtn},on:{click:e.onClickEdit}},[e._v("編集")])],1)],1),t("ItemDialogRequests",{ref:"ItemDialogRequests",on:{submitEdit:e.updateForm,submitOnClickAction:e.notifyToApprover}})],1):e._e()},it=[],lt={name:"RequestDetail",components:{ItemDialogRequests:Ye},data(){return{formData:[],currentTableName:"requests",latestStatus:"",latestApproverEmail:""}},computed:{...(0,Z.rn)({requests:e=>e.firestore.requests,selectedTabName:e=>e.firestore.selectedTabName}),...(0,Z.Se)({getUserEmail:"firebase/getUserEmail"}),formattedDate(){if(""==this.formData)return null;{const e=this.formData.common.created_at.toDate();return this.dateToStr24HPad0(e)}},requestTypeValue(){return""==this.formData?null:this.formData.common.request_type.value},isDisabledApproveBtn(){if(this.formData.common.current_step){const e=[this.formData.common.routes.approvers[this.formData.common.current_step-1].email!=this.getUserEmail,"完了"==this.formData.common.routes.approvers[this.formData.common.max_step-1].status,"否認"==this.formData.common.routes.approvers[this.formData.common.current_step-1].status,"差戻し"==this.formData.common.routes.approvers[this.formData.common.current_step-1].status];return e.some((e=>1==e))}return!0},isDisabledEditBtn(){const e=[this.formData.common.email!=this.getUserEmail,"保留中"==this.formData.common.status,"完了"==this.formData.common.status,"否認"==this.formData.common.status];return e.some((e=>1==e))},lengthText(){const e=this.formData.unique.paid_leave.length;let t;switch(e){case"half_day":t="半日";break;case"full_day":t="終日";break}return t},acquireDateRadioText(){const e=this.formData.unique.hosting.acquire_date_radio;let t;switch(e){case"just_now":t="今すぐ";break;case"scheduled":t="指定日あり";break}return t},paymentTypeText(){const e=this.formData.unique.hosting.payment_type;let t;switch(e){case"monthly":t="月額";break;case"anuually":t="年間一括";break}return t},paymentStatusText(){const e=this.formData.unique.hosting.payment_status;let t;switch(e){case"first_payment":t="初めての引落し";break;case"has_past_payment":t="当社で引落し歴あり";break}return t}},methods:{...(0,Z.nv)({fetchCollectionsByOneQuery:"firestore/fetchCollectionsByOneQuery",fetchMyDetail:"firestore/fetchMyDetail",fetchOthersDetail:"firestore/fetchOthersDetail",fetchRequest:"firestore/fetchRequest",updateSubCollection:"firestore/updateSubCollection",sendEmail:"firestore/sendEmail"}),async fetchRequestDetail(){const e=this.$route.path,t=this.getUserEmail,a=this.$route.params.id;e.startsWith("/my/")?await this.fetchMyDetail({userId:t,docId:a}):e.startsWith("/others/")&&await this.fetchOthersDetail({userId:t,docId:a})},dateToStr24HPad0(e,t){return t||(t="YYYY/MM/DD hh:mm"),t=t.replace(/YYYY/g,e.getFullYear()),t=t.replace(/MM/g,("0"+(e.getMonth()+1)).slice(-2)),t=t.replace(/DD/g,("0"+e.getDate()).slice(-2)),t=t.replace(/hh/g,("0"+e.getHours()).slice(-2)),t=t.replace(/mm/g,("0"+e.getMinutes()).slice(-2)),t=t.replace(/ss/g,("0"+e.getSeconds()).slice(-2)),t},async onClickApprove(){if(this.formData.common.current_step==this.formData.common.max_step){this.formData.common.routes.approvers[this.formData.common.current_step-1].status="完了",this.formData.common.status="完了",this.formData.common.current_approver_email="";const e=this.formData.common.email,t=this.$route.params.id,a="承認",s=this.formData;await this.updateSubCollection({userId:e,docId:t,item:s,operationType:a}),this.notifyToApplicant(a)}else{this.formData.common.routes.approvers[this.formData.common.current_step-1].status="完了",this.formData.common.status="保留中",this.formData.common.current_approver_email=this.formData.common.routes.approvers[this.formData.common.current_step-1].email,this.formData.common.current_step++;const e=this.formData.common.email,t=this.$route.params.id,a="承認",s=this.formData;await this.updateSubCollection({userId:e,docId:t,item:s,operationType:a});const r=this.formData.common.current_approver_email;this.notifyToApprover(r)}},async onClickDisapprove(){this.formData.common.routes.approvers[this.formData.common.current_step-1].status="否認",this.formData.common.status="否認",this.formData.common.current_approver_email="";const e=this.formData.common.email,t=this.$route.params.id,a="否認",s=this.formData;await this.updateSubCollection({userId:e,docId:t,item:s,operationType:a}),this.notifyToApplicant(a)},async onClickRemand(){this.formData.common.routes.approvers[this.formData.common.current_step-1].status="差戻し",this.formData.common.status="差戻し",this.formData.common.current_approver_email="";const e=this.formData.common.email,t=this.$route.params.id,a="差戻し",s=this.formData;await this.updateSubCollection({userId:e,docId:t,item:s,operationType:a}),this.notifyToApplicant(a)},async batchUpdate(e){const t=this.formData.common.email,a=this.$route.params.id;await this.fetchRequest({userId:t,docId:a});const s=this.requests,r=this.data;r.current_step=this.formData.common.current_step,s.status=this.latestStatus,r.status=this.latestStatus,s.current_approver_email=this.latestApproverEmail,this.updateSubCollection({userId:t,docId:a,itemRequest:s,itemDetail:r,operationType:e})},createEmailBody(e,t){const a=`${e}<br><br>詳細は下記リンクからご確認ください。<br><br><a href="${t}">${t}</a>`;return a},onClickEdit(){const e=this.formData;this.$refs.ItemDialogRequests.open("edit",e)},updateForm(e){this.formData=e},notifyToApplicant(e){const t=this.formData.common.email,a=`申請が${e}されました [${this.formData.common.title}]`,s=window.location.href,r=s.replace("/others","/my"),n=this.createEmailBody(a,r),o={to:t,subject:a,body:n};this.sendEmail({emailConfig:o})},notifyToApprover(e){const t=e,a=`[承認依頼] [${this.formData.common.title}]`,s=window.location.href,r=this.createEmailBody(a,s),n={to:t,subject:a,body:r};this.sendEmail({emailConfig:n})}},async created(){await this.fetchRequestDetail(),this.formData=this.requests}},ct=lt,ut=(0,B.Z)(ct,ot,it,!1,null,null,null),mt=ut.exports,dt=function(){var e=this,t=e._self._c;return t("div",[t(l.Z,[t(c.EB,[t(me.Z,{attrs:{cols:"8"}},[t("div",{staticClass:"h5"},[e._v(" "+e._s(e.title)+" ")])]),t(k.Z),t(me.Z,{staticClass:"text-right",attrs:{cols:"4"}},[t(i.Z,{attrs:{dark:"",color:"secondary"},on:{click:e.onClickAdd}},[t(d.Z,[e._v("mdi-plus")])],1)],1),t(me.Z,{attrs:{cols:"12"}},[t(ke.Z,{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),t(Ae.Z,{staticClass:"text-no-wrap",attrs:{headers:e.tableHeaders,items:e.tableData,search:e.search,"footer-props":e.footerProps,"sort-by":"department","sort-desc":!1,"items-per-page":30,"mobile-breakpoint":"0"},scopedSlots:e._u([{key:"item.actions",fn:function({item:a}){return[t(d.Z,{staticClass:"mr-2",on:{click:function(t){return e.onClickEdit(a)}}},[e._v("mdi-pencil")]),t(d.Z,{on:{click:function(t){return e.onClickDelete(a)}}},[e._v("mdi-delete")])]}}],null,!0)})],1),t("ItemDialogDepartments",{ref:"ItemDialogDepartments"}),t("DeleteDialog",{ref:"deleteDialog"})],1)},pt=[],ht=function(){var e=this,t=e._self._c;return t(m.Z,{attrs:{scrollable:"",persistent:"","max-width":"500px",eager:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t(l.Z,[t(c.EB,[e._v(e._s(e.titleText))]),t(Pe.Z),t(c.ZB,[t(be.Z,{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(ke.Z,{attrs:{label:"部署",rules:e.departmentRules},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}})],1)],1),t(Pe.Z),t(c.h7,[t(k.Z),t(i.Z,{attrs:{color:"grey darken-1",text:""},on:{click:e.onClickClose}},[e._v(" キャンセル ")]),t(i.Z,{attrs:{color:"primary",text:"",disabled:!e.valid},on:{click:e.onClickAction}},[e._v(" "+e._s(e.actionText)+" ")])],1)],1)],1)},ft=[],_t={name:"ItemDialogDepartments",data(){return{currentTableName:"departments",show:!1,valid:!1,menu:!1,actionType:"add",id:"",department:"",departmentRules:[e=>e.trim().length>0||"部署は必須です",e=>e.length<=32||"32文字以内で入力してください"]}},computed:{titleText(){return"add"===this.actionType?"データ追加":"データ編集"},actionText(){return"add"===this.actionType?"追加":"更新"}},methods:{...(0,Z.nv)({addDocument:"firestore/addDocument",updateDocument:"firestore/updateDocument"}),open(e,t){this.show=!0,this.actionType=e,this.resetForm(t)},onClickClose(){this.show=!1},async onClickAction(){const e={id:this.id,department:this.department},t=this.currentTableName;"add"===this.actionType?await this.addDocument({item:e,currentTableName:t}):await this.updateDocument({item:e,currentTableName:t}),this.show=!1},resetForm(e={}){this.id=e.id||"",this.department=e.department||"",this.$refs.form.resetValidation()}}},gt=_t,vt=(0,B.Z)(gt,ht,ft,!1,null,null,null),bt=vt.exports,kt=function(){var e=this,t=e._self._c;return t(m.Z,{attrs:{persistent:"","max-width":"290px"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t(l.Z,[t(c.EB),t(c.ZB,{staticClass:"black--text"},[e._v(" 削除しますか？ ")]),t(c.h7,[t(k.Z),t(i.Z,{attrs:{color:"grey",text:""},on:{click:e.onClickClose}},[e._v("キャンセル")]),t(i.Z,{attrs:{color:"error",text:""},on:{click:e.onClickDelete}},[e._v("削除")])],1)],1)],1)},qt=[],yt={name:"DeleteDialog",data(){return{show:!1,item:{},currentTableName:""}},methods:{...(0,Z.nv)({deleteDocument:"firestore/deleteDocument"}),open(e,t){this.show=!0,this.item=e,this.currentTableName=t},onClickClose(){this.show=!1},async onClickDelete(){const e=this.item,t=this.currentTableName;await this.deleteDocument({item:e,currentTableName:t}),this.show=!1}}},Dt=yt,xt=(0,B.Z)(Dt,kt,qt,!1,null,null,null),Zt=xt.exports,wt={name:"Departments",components:{ItemDialogDepartments:bt,DeleteDialog:Zt},data(){return{currentTableName:"departments",title:"部署一覧",search:"",tableData:[]}},computed:{...(0,Z.rn)({departments:e=>e.firestore.departments}),tableHeaders(){return[{text:"部署",value:"department",sortable:!0},{text:"操作",value:"actions",sortable:!1}]},footerProps(){return{itemsPerPageText:"",itemsPerPageOptions:[30,-1]}}},methods:{...(0,Z.nv)({fetchAllCollections:"firestore/fetchAllCollections"}),onClickAdd(){this.$refs.ItemDialogDepartments.open("add")},onClickEdit(e){this.$refs.ItemDialogDepartments.open("edit",e)},onClickDelete(e){const t=this.currentTableName;this.$refs.deleteDialog.open(e,t)},async getRecords(){const e=this.currentTableName;await this.fetchAllCollections({currentTableName:e}),this.tableData=this.departments}},async created(){await this.getRecords()},mounted(){ze.showScrollHint()}},Tt=wt,Bt=(0,B.Z)(Tt,dt,pt,!1,null,null,null),At=Bt.exports,Ct=function(){var e=this,t=e._self._c;return t(l.Z,[t(Se.Z,{attrs:{grow:"",color:"primary"}},[t(Ce.Z,{on:{click:function(t){return e.onClickTab("paid_leave")}}},[e._v("休暇申請")]),t(Ce.Z,{on:{click:function(t){return e.onClickTab("equipment")}}},[e._v("備品申請")]),t(Ce.Z,{on:{click:function(t){return e.onClickTab("hosting")}}},[e._v("ホスティング申請")])],1),t(c.EB,[t(me.Z,{attrs:{cols:"8"}},[t("div",{staticClass:"h5"},[e._v(" "+e._s(e.title)+" ")])]),t(k.Z),t(me.Z,{staticClass:"text-right",attrs:{cols:"4"}},[t(i.Z,{attrs:{dark:"",color:"secondary"},on:{click:e.onClickAdd}},[t(d.Z,[e._v("mdi-plus")])],1)],1),t(me.Z,{attrs:{cols:"12"}},[t(ke.Z,{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),t(Ae.Z,{staticClass:"text-no-wrap",attrs:{headers:e.tableHeaders,items:e.tableData,search:e.search,"footer-props":e.footerProps,"sort-by":["department","order"],"sort-desc":[!1,!1],"items-per-page":30,"mobile-breakpoint":"0"},scopedSlots:e._u([{key:"item.actions",fn:function({item:a}){return[t(d.Z,{staticClass:"mr-2",on:{click:function(t){return e.onClickEdit(a)}}},[e._v("mdi-pencil")]),t(d.Z,{on:{click:function(t){return e.onClickDelete(a)}}},[e._v("mdi-delete")])]}}],null,!0)}),t("ItemDialogRoutes",{ref:"ItemDialogRoutes"}),t("DeleteDialog",{ref:"deleteDialog"})],1)},St=[],Rt=function(){var e=this,t=e._self._c;return t(m.Z,{attrs:{scrollable:"",persistent:"","max-width":"700px",eager:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t(l.Z,[t(c.EB,[e._v(e._s(e.titleText))]),t(Pe.Z),t(c.ZB,[t(be.Z,{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(Me.Z,{attrs:{label:"部署",rules:e.departmentRules,items:e.departments,"item-text":"department","item-value":"department"},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}}),t(ke.Z,{attrs:{label:"タイトル",rules:e.titleRules},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),t(ke.Z,{attrs:{label:"承認者数",rules:e.numberOfApproversRules,readonly:""},model:{value:e.approvers.length,callback:function(t){e.$set(e.approvers,"length",t)},expression:"approvers.length"}}),t(Ae.Z,{staticClass:"text-no-wrap",attrs:{headers:e.tableHeaders,items:e.approvers,"footer-props":e.footerProps,"sort-by":["order"],"sort-desc":[!1],"items-per-page":30,"mobile-breakpoint":"0","hide-default-footer":""},scopedSlots:e._u([{key:"item.actions",fn:function({item:a}){return[t(d.Z,{on:{click:function(t){return e.deleteApprover(a)}}},[e._v("mdi-delete")])]}}],null,!0)}),t(Me.Z,{attrs:{label:"承認者",items:e.users,"item-text":e=>`${e.name} (${e.id})`,"return-object":""},model:{value:e.userInfo,callback:function(t){e.userInfo=t},expression:"userInfo"}}),t(k.Z),t(i.Z,{attrs:{color:"primary",text:"",disabled:!e.userInfo.id},on:{click:e.addApprover}},[e._v("追加")])],1)],1),t(Pe.Z),t(c.h7,[t(k.Z),t(i.Z,{attrs:{color:"grey darken-1",text:""},on:{click:e.onClickClose}},[e._v(" キャンセル ")]),t(i.Z,{attrs:{color:"primary",text:"",disabled:!e.valid},on:{click:e.onClickAction}},[e._v(" "+e._s(e.actionText)+" ")])],1)],1)],1)},It=[],$t={name:"ItemDialogRoutes",data(){return{currentTableName:"routes",currentTabName:"",show:!1,valid:!1,menu:!1,actionType:"add",id:"",department:"",title:"",userInfo:"",numberOfApprovers:"",approvers:[],readers:[],departmentRules:[e=>e.trim().length>0||"部署は必須です"],titleRules:[e=>e.trim().length>0||"タイトルは必須です"],numberOfApproversRules:[e=>e>0||"承認者は必須です"]}},computed:{...(0,Z.rn)({departments:e=>e.firestore.departments,users:e=>e.firestore.users}),titleText(){return"add"===this.actionType?"データ追加":"データ編集"},actionText(){return"add"===this.actionType?"追加":"更新"},tableHeaders(){return[{text:"順序",value:"order",sortable:!1},{text:"メールアドレス",value:"email",sortable:!1},{text:"氏名",value:"name",sortable:!1},{text:"操作",value:"actions",sortable:!1}]},footerProps(){return{itemsPerPageText:"",itemsPerPageOptions:[30,-1]}}},methods:{...(0,Z.nv)({addDocument:"firestore/addDocument",updateDocument:"firestore/updateDocument",fetchAllCollections:"firestore/fetchAllCollections"}),open(e,t,a){this.show=!0,this.actionType=e,this.currentTabName=a,this.getDepartments(),this.getUsers(),this.resetForm(t)},onClickClose(){this.show=!1},async onClickAction(){const e={id:this.id,request_type:this.currentTabName,department:this.department,title:this.title,approvers:this.approvers},t=this.currentTableName;"add"===this.actionType?await this.addDocument({item:e,currentTableName:t}):await this.updateDocument({item:e,currentTableName:t}),this.show=!1},addApprover(){const e={order:this.approvers.length+1,email:this.userInfo.id,name:this.userInfo.name};this.approvers.push(e),this.userInfo=[]},deleteApprover(e){const t=this.approvers,a=t.indexOf(e);t.splice(a,1)},resetForm(e={}){this.id=e.id||"",this.department=e.department||"",this.title=e.title||"",this.approvers=e.approvers||[],this.readers=e.readers||[],this.$refs.form.resetValidation()},async getDepartments(){const e="departments";await this.fetchAllCollections({currentTableName:e})},async getUsers(){const e="users";await this.fetchAllCollections({currentTableName:e})}}},Nt=$t,Pt=(0,B.Z)(Nt,Rt,It,!1,null,null,null),Et=Pt.exports,Ut={name:"Routes",data(){return{currentTableName:"routes",title:"申請ルート設定",search:"",tableData:[],currentTabName:"paid_leave"}},components:{ItemDialogRoutes:Et,DeleteDialog:Zt},computed:{...(0,Z.rn)({routes:e=>e.firestore.routes}),tableHeaders(){return[{text:"部署",value:"department",sortable:!0},{text:"タイトル",value:"title",sortable:!1},{text:"操作",value:"actions",sortable:!1}]},footerProps(){return{itemsPerPageText:"",itemsPerPageOptions:[30,-1]}}},methods:{...(0,Z.nv)({fetchCollectionsByOneQuery:"firestore/fetchCollectionsByOneQuery"}),onClickTab(e){this.setCurrentTabName(e),this.getRecords()},onClickAdd(){const e=this.currentTabName;this.$refs.ItemDialogRoutes.open("add",{},e)},onClickEdit(e){const t=this.currentTabName;this.$refs.ItemDialogRoutes.open("edit",e,t)},onClickDelete(e){const t=this.currentTableName;this.$refs.deleteDialog.open(e,t)},async getRecords(){const e=this.currentTableName,t={field:"request_type",compare:"==",value:this.currentTabName};await this.fetchCollectionsByOneQuery({currentTableName:e,customQuery:t}),this.tableData=this.routes},setCurrentTabName(e){this.currentTabName=e}},created(){this.getRecords()},mounted(){ze.showScrollHint()}},Mt=Ut,Ot=(0,B.Z)(Mt,Ct,St,!1,null,null,null),jt=Ot.exports,Ht=function(){var e=this,t=e._self._c;return t("div",[t(l.Z,[t(c.EB,[t(me.Z,{attrs:{cols:"8"}},[t("div",{staticClass:"h5"},[e._v(" "+e._s(e.title)+" ")])]),t(k.Z),t(me.Z,{staticClass:"text-right",attrs:{cols:"4"}},[t(i.Z,{attrs:{dark:"",color:"secondary"},on:{click:e.onClickAdd}},[t(d.Z,[e._v("mdi-plus")])],1)],1),t(me.Z,{attrs:{cols:"12"}},[t(ke.Z,{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),t(Ae.Z,{staticClass:"text-no-wrap",attrs:{headers:e.tableHeaders,items:e.tableData,search:e.search,"footer-props":e.footerProps,"sort-by":"name","sort-desc":!1,"items-per-page":30,"mobile-breakpoint":"0"},scopedSlots:e._u([{key:"item.actions",fn:function({item:a}){return[t(d.Z,{on:{click:function(t){return e.onClickDelete(a)}}},[e._v("mdi-delete")])]}}],null,!0)})],1),t("ItemDialogAdmins",{ref:"ItemDialogAdmins"}),t("DeleteDialog",{ref:"deleteDialog"})],1)},Vt=[],Lt=function(){var e=this,t=e._self._c;return t(m.Z,{attrs:{scrollable:"",persistent:"","max-width":"500px",eager:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t(l.Z,[t(c.EB,[e._v(e._s(e.titleText))]),t(Pe.Z),t(c.ZB,[t(be.Z,{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(Me.Z,{attrs:{label:"管理者",items:e.users,"item-text":e=>`${e.name} (${e.id})`,"return-object":""},model:{value:e.userInfo,callback:function(t){e.userInfo=t},expression:"userInfo"}})],1)],1),t(Pe.Z),t(c.h7,[t(k.Z),t(i.Z,{attrs:{color:"grey darken-1",text:""},on:{click:e.onClickClose}},[e._v(" キャンセル ")]),t(i.Z,{attrs:{color:"primary",text:"",disabled:!e.valid},on:{click:e.onClickAction}},[e._v(" "+e._s(e.actionText)+" ")])],1)],1)],1)},Ft=[],Jt={name:"ItemDialogAdmins",data(){return{currentTableName:"admins",show:!1,valid:!1,menu:!1,actionType:"add",userInfo:"",id:"",email:"",name:""}},computed:{...(0,Z.rn)({users:e=>e.firestore.users}),titleText(){return"add"===this.actionType?"データ追加":"データ編集"},actionText(){return"add"===this.actionType?"追加":"更新"}},methods:{...(0,Z.nv)({fetchAllCollections:"firestore/fetchAllCollections",addDocumentWithTextId:"firestore/addDocumentWithTextId",updateDocument:"firestore/updateDocument"}),open(e,t){this.show=!0,this.actionType=e,this.getUsers(),this.resetForm(t)},onClickClose(){this.show=!1},async onClickAction(){const e={id:this.userInfo.id,name:this.userInfo.name},t=this.currentTableName;"add"===this.actionType?await this.addDocumentWithTextId({item:e,currentTableName:t}):await this.updateDocument({item:e,currentTableName:t}),this.show=!1},resetForm(e={}){this.id=e.id||"",this.userInfo={name:e.name,email:e.email}||"",this.$refs.form.resetValidation()},async getUsers(){const e="users";await this.fetchAllCollections({currentTableName:e})}}},Wt=Jt,Yt=(0,B.Z)(Wt,Lt,Ft,!1,null,null,null),Qt=Yt.exports,Gt={name:"Admins",components:{ItemDialogAdmins:Qt,DeleteDialog:Zt},data(){return{currentTableName:"admins",title:"管理者一覧",search:"",tableData:[]}},computed:{...(0,Z.rn)({admins:e=>e.firestore.admins}),tableHeaders(){return[{text:"氏名",value:"name",sortable:!1},{text:"操作",value:"actions",sortable:!1}]},footerProps(){return{itemsPerPageText:"",itemsPerPageOptions:[30,-1]}}},methods:{...(0,Z.nv)({fetchAllCollections:"firestore/fetchAllCollections"}),onClickAdd(){this.$refs.ItemDialogAdmins.open("add")},onClickEdit(e){this.$refs.ItemDialogAdmins.open("edit",e)},onClickDelete(e){const t=this.currentTableName;this.$refs.deleteDialog.open(e,t)},async getRecords(){const e=this.currentTableName;await this.fetchAllCollections({currentTableName:e}),this.tableData=this.admins}},async created(){await this.getRecords()},mounted(){ze.showScrollHint()}},zt=Gt,Kt=(0,B.Z)(zt,Ht,Vt,!1,null,null,null),Xt=Kt.exports,ea=function(){var e=this,t=e._self._c;return t("div",[t(l.Z,[t(c.EB,[t(me.Z,{attrs:{cols:"8"}},[t("div",{staticClass:"h5"},[e._v(" "+e._s(e.title)+" ")])]),t(k.Z),t(me.Z,{staticClass:"text-right",attrs:{cols:"4"}},[t(i.Z,{attrs:{dark:"",color:"secondary"},on:{click:e.onClickAdd}},[t(d.Z,[e._v("mdi-plus")])],1)],1),t(me.Z,{attrs:{cols:"12"}},[t(ke.Z,{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),t(Ae.Z,{staticClass:"text-no-wrap",attrs:{headers:e.tableHeaders,items:e.tableData,search:e.search,"footer-props":e.footerProps,"sort-by":"department","sort-desc":!1,"items-per-page":30,"mobile-breakpoint":"0"},scopedSlots:e._u([{key:"item.actions",fn:function({item:a}){return[t(d.Z,{staticClass:"mr-2",on:{click:function(t){return e.onClickEdit(a)}}},[e._v("mdi-pencil")]),t(d.Z,{on:{click:function(t){return e.onClickDelete(a)}}},[e._v("mdi-delete")])]}}],null,!0)})],1),t("ItemDialogUsers",{ref:"ItemDialogUsers"}),t("DeleteDialog",{ref:"deleteDialog"})],1)},ta=[],aa=function(){var e=this,t=e._self._c;return t(m.Z,{attrs:{scrollable:"",persistent:"","max-width":"500px",eager:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t(l.Z,[t(c.EB,[e._v(e._s(e.titleText))]),t(Pe.Z),t(c.ZB,[t(be.Z,{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(Me.Z,{attrs:{label:"部署",rules:e.departmentRules,items:e.departments,"item-text":"department","item-value":"department"},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}}),t(ke.Z,{attrs:{label:"メールアドレス",rules:e.emailRules,readonly:"edit"==e.actionType},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t(ke.Z,{attrs:{label:"氏名",rules:e.nameRules},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1),t(Pe.Z),t(c.h7,[t(k.Z),t(i.Z,{attrs:{color:"grey darken-1",text:""},on:{click:e.onClickClose}},[e._v(" キャンセル ")]),t(i.Z,{attrs:{color:"primary",text:"",disabled:!e.valid},on:{click:e.onClickAction}},[e._v(" "+e._s(e.actionText)+" ")])],1)],1)],1)},sa=[],ra={name:"ItemDialogUsers",data(){return{currentTableName:"users",show:!1,valid:!1,menu:!1,actionType:"add",id:"",department:"",email:"",name:"",departmentRules:[e=>e.trim().length>0||"部署は必須です"],emailRules:[e=>e.trim().length>0||"メールアドレスは必須です",e=>e.trim().length<=32||"メールアドレスは32文字以内で入力してください"],nameRules:[e=>e.trim().length>0||"氏名は必須です",e=>e.trim().length<=32||"氏名は32文字以内で入力してください"]}},computed:{...(0,Z.rn)({departments:e=>e.firestore.departments}),titleText(){return"add"===this.actionType?"データ追加":"データ編集"},actionText(){return"add"===this.actionType?"追加":"更新"}},methods:{...(0,Z.nv)({addDocumentWithTextId:"firestore/addDocumentWithTextId",updateDocument:"firestore/updateDocument",fetchAllCollections:"firestore/fetchAllCollections"}),open(e,t){this.show=!0,this.actionType=e,this.getDepartments(),this.resetForm(t)},onClickClose(){this.show=!1},async onClickAction(){const e={id:this.email,department:this.department,name:this.name},t=this.currentTableName;"add"===this.actionType?await this.addDocumentWithTextId({item:e,currentTableName:t}):await this.updateDocument({item:e,currentTableName:t}),this.show=!1},resetForm(e={}){this.id=e.id||"",this.department=e.department||"",this.email=e.id||"",this.name=e.name||"",this.$refs.form.resetValidation()},async getDepartments(){const e="departments";await this.fetchAllCollections({currentTableName:e})}}},na=ra,oa=(0,B.Z)(na,aa,sa,!1,null,null,null),ia=oa.exports,la={name:"Users",components:{ItemDialogUsers:ia,DeleteDialog:Zt},data(){return{currentTableName:"users",title:"従業員一覧",search:"",tableData:[]}},computed:{...(0,Z.rn)({users:e=>e.firestore.users}),tableHeaders(){return[{text:"部署",value:"department",sortable:!0},{text:"メールアドレス",value:"id",sortable:!1},{text:"氏名",value:"name",sortable:!1},{text:"操作",value:"actions",sortable:!1}]},footerProps(){return{itemsPerPageText:"",itemsPerPageOptions:[30,-1]}}},methods:{...(0,Z.nv)({fetchAllCollections:"firestore/fetchAllCollections"}),onClickAdd(){this.$refs.ItemDialogUsers.open("add")},onClickEdit(e){this.$refs.ItemDialogUsers.open("edit",e)},onClickDelete(e){const t=this.currentTableName;this.$refs.deleteDialog.open(e,t)},async getRecords(){const e=this.currentTableName;await this.fetchAllCollections({currentTableName:e}),this.tableData=this.users}},created(){this.getRecords()},mounted(){ze.showScrollHint()}},ca=la,ua=(0,B.Z)(ca,ea,ta,!1,null,null,null),ma=ua.exports,da=function(){var e=this,t=e._self._c;return t(me.Z,{attrs:{align:"center"}},[t("h1",{staticClass:"text-h1 py-8"},[e._v("404")]),t(d.Z,{staticClass:"text-h2 py-4"},[e._v("mdi-emoticon-cry-outline")]),t("p",{staticClass:"text-body-1 py-2"},[e._v("ページが見つかりません")])],1)},pa=[],ha={name:"NotFound",created(){this.$router.replace({path:"/404"})}},fa=ha,_a=(0,B.Z)(fa,da,pa,!1,null,null,null),ga=_a.exports;s.ZP.use(S.ZP);const va=[{path:"/",name:"RequestOverview",component:tt,meta:{requiresAuth:!0,requiresAdmin:!1}},{path:"/my/requests/:id",name:"myRequestDetail",component:mt,meta:{requiresAuth:!0,requiresAdmin:!1}},{path:"/others/requests/:id",name:"othersRequestDetail",component:mt,meta:{requiresAuth:!0,requiresAdmin:!1}},{path:"/login",name:"Login",component:ve,meta:{requiresAuth:!1,requiresAdmin:!1},beforeEnter(e,t,a){const s=(0,J.v0)();(0,J.Aj)(s,(e=>{e?a("/"):a()}))}},{path:"/settings",name:"Settings",component:we,meta:{requiresAuth:!0,requiresAdmin:!1}},{path:"/departments",name:"Departments",component:At,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/routes",name:"Routes",component:jt,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admins",name:"Admins",component:Xt,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/users",name:"Users",component:ma,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"*",name:"NotFound",component:ga,meta:{requiresAuth:!1,requiresAdmin:!1}}],ba=new S.ZP({routes:va});ba.beforeEach(((e,t,a)=>{const s=(0,J.v0)(),r=e.matched.some((e=>e.meta.requiresAuth)),n=e.matched.some((e=>e.meta.requiresAdmin)),o=async e=>{try{await ue.dispatch("firestore/fetchAllCollections",{currentTableName:"admins"});const t=ue.getters["firestore/getAdminEmails"],a=t.includes(e.email);return ue.commit("firebase/setAdminStatus",a),a}catch(t){return!1}};r&&n?(0,J.Aj)(s,(async t=>{const s=await o(t);t&&s?a():a(t&&!s?{path:"/403"}:{path:"/login",query:{redirect:e.fullPath}})})):r&&!n?(0,J.Aj)(s,(t=>{t?a():a({path:"/login",query:{redirect:e.fullPath}})})):a()}));var ka=ba,qa=a(1705);s.ZP.use(qa.Z);var ya=new qa.Z({theme:{themes:{light:{primary:"#546e7a",primaryLighten:"#819ca9",primaryDarken:"#29434e",secondary:"#6d4c41",secondaryLighten:"#9c786c",secondaryDarken:"#40241a",error:"#e53935",warning:"#ffb300",info:"#1e88e5",success:"#7cb342"}}}});s.ZP.config.productionTip=!1;const Da=async()=>{await ue.dispatch("firebase/onAuth"),new s.ZP({router:ka,store:ue,vuetify:ya,render:e=>e(C),created:()=>document.documentElement.setAttribute("lang","ja")}).$mount("#app")};Da()}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,s,r,n){if(!s){var o=1/0;for(u=0;u<e.length;u++){s=e[u][0],r=e[u][1],n=e[u][2];for(var i=!0,l=0;l<s.length;l++)(!1&n||o>=n)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(i=!1,n<o&&(o=n));if(i){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[s,r,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,n,o=s[0],i=s[1],l=s[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(r in i)a.o(i,r)&&(a.m[r]=i[r]);if(l)var u=l(a)}for(t&&t(s);c<o.length;c++)n=o[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},s=self["webpackChunkvue_gas_workflow"]=self["webpackChunkvue_gas_workflow"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(105)}));s=a.O(s)})();
//# sourceMappingURL=app.11ffe84b.js.map